{"ast":null,"code":"import React,{useState,useEffect}from'react';import ImageUpload from'./components/ImageUpload';import Resizer from'react-image-file-resizer';import ImageModal from'./components/ImageModal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){// State variables\nconst[uploadedFiles,setUploadedFiles]=useState([]);const[divideTime,setDivideTime]=useState(false);const[totalDuration,setTotalDuration]=useState(0);const[loading,setLoading]=useState(false);const[message,setMessage]=useState('');const[startDate,setStartDate]=useState('2024-11-25');const[endDate,setEndDate]=useState('2024-11-25');const[startTime,setStartTime]=useState('10:00');const[endTime,setEndTime]=useState('22:00');const[isModalOpen,setIsModalOpen]=useState(false);const[fetchedImages,setFetchedImages]=useState([]);// State for fetched images\n// Fetch images from the backend on component mount\nuseEffect(()=>{const fetchImages=async()=>{try{const response=await fetch('https://ad-display-backend.onrender.com/api/images');const result=await response.json();console.log('Fetched images:',result);// Log the fetched images\n// Check if the fetch was successful and if data is an array\nif(result.success&&Array.isArray(result.data)){setFetchedImages(result.data);// Update state with fetched images\n}else{console.error('Fetched data is not an array:',result.data);setFetchedImages([]);// Set to empty array if not valid\n}}catch(error){console.error('Error fetching images:',error);setMessage('An error occurred while fetching images.');}};fetchImages();},[]);// Empty dependency array to fetch images only once on mount\n// Handle image deletion from the gallery\nconst handleDeleteImage=async index=>{const imageToDelete=fetchedImages[index];try{const response=await fetch(`https://ad-display-backend.onrender.com/api/images/${imageToDelete.id}`,{method:'DELETE',headers:{'Content-Type':'application/json'}});if(response.ok){// If the delete was successful, update the state\nconst updatedFiles=[...fetchedImages];updatedFiles.splice(index,1);setFetchedImages(updatedFiles);setMessage(`Image ${imageToDelete.imageName} deleted successfully!`);}else{const errorData=await response.json();setMessage(errorData.error||`Failed to delete ${imageToDelete.imageName}.`);}}catch(error){console.error('Error deleting image:',error);setMessage('An error occurred while deleting the image.');}};// Resize the uploaded image before uploading\nconst resizeImage=file=>new Promise(resolve=>{Resizer.imageFileResizer(file,800,// Max width\n800,// Max height\n'JPEG',// Format\n90,// Quality\n0,// Rotation (0 for no rotation)\nuri=>resolve(uri),// Resolve with resized image\n'base64'// Return as base64 string\n);});// Handle image upload and resize images before setting them\nconst handleUpload=async files=>{const resizedImages=await Promise.all(Array.from(files).map(file=>resizeImage(file))// Resize each file\n);setUploadedFiles(resizedImages.map((base64,index)=>({file:files[index],base64,duration:0})));};// Remove an uploaded image from the list\nconst handleRemoveImage=index=>{const updatedFiles=[...uploadedFiles];updatedFiles.splice(index,1);// Remove image by index\nsetUploadedFiles(updatedFiles);};// Handle duration change for a specific image\nconst handleDurationChange=(index,value)=>{const updatedFiles=[...uploadedFiles];updatedFiles[index].duration=value;// Update the duration\nsetUploadedFiles(updatedFiles);};// Calculate the divided duration when the checkbox is checked\nconst calculateDividedDuration=()=>{if(uploadedFiles.length>0&&totalDuration>0){return Math.floor(totalDuration*60/uploadedFiles.length);// Divide duration equally\n}return 0;};// Check if the submit button should be disabled\nconst isSubmitDisabled=()=>{if(!startDate||!endDate||!startTime||!endTime)return true;// Disable if required fields are missing\nif(divideTime||uploadedFiles.length===0)return false;// Allow submit if dividing time or files are present\nreturn uploadedFiles.some(image=>image.duration===0);// Disable if any image has no duration set\n};// Handle form submission to upload images to the backend\nconst handleSubmit=async()=>{setLoading(true);setMessage('');for(const image of uploadedFiles){const payload={imageName:image.file.name,imageUrl:image.base64,startDate,endDate,startTime,endTime,duration:divideTime?calculateDividedDuration():Number(image.duration),// Use divided or custom duration\nuserId:1,isDBUpdated:'y'// Mark as needing sync\n};try{const response=await fetch('https://ad-display-backend.onrender.com/api/images',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});if(response.ok){const result=await response.json();setMessage(`Image ${image.file.name} uploaded successfully!`);}else{const errorData=await response.json();setMessage(errorData.error||`Failed to upload ${image.file.name}.`);}}catch(err){setMessage(`An error occurred while uploading ${image.file.name}.`);}}setLoading(false);setUploadedFiles([]);// Clear uploaded images\n};// Fetch images from the backend (used in multiple places)\nconst handleFetchImages=async()=>{try{const response=await fetch('https://ad-display-backend.onrender.com/api/images');const result=await response.json();console.log('Fetched images:',result);// Log the fetched images\n// Check if the fetch was successful\nif(result.success){setFetchedImages(result.data);// Update state with fetched images\n}else{setMessage(result.message||'Failed to fetch images.');}}catch(error){console.error('Error fetching images:',error);// Log the error for debugging\nsetMessage('An error occurred while fetching images.');}};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',fontFamily:'Arial'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Ad Display Portal v32\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Common Start/End Dates and Times\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'10px'},children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Start Date:\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:startDate,onChange:e=>setStartDate(e.target.value),style:{marginLeft:'10px'}})]})}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'10px'},children:/*#__PURE__*/_jsxs(\"label\",{children:[\"End Date:\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:endDate,onChange:e=>setEndDate(e.target.value),style:{marginLeft:'10px'}})]})}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'10px'},children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Start Time:\",/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:startTime,onChange:e=>setStartTime(e.target.value),style:{marginLeft:'10px'}})]})}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'10px'},children:/*#__PURE__*/_jsxs(\"label\",{children:[\"End Time:\",/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:endTime,onChange:e=>setEndTime(e.target.value),style:{marginLeft:'10px'}})]})})]}),/*#__PURE__*/_jsx(ImageUpload,{onUpload:handleUpload}),uploadedFiles.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'20px'},children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:divideTime,onChange:e=>setDivideTime(e.target.checked)}),\"Divide time Duration equally\"]}),divideTime&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'10px'},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Total Duration (in minutes): \"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:totalDuration,onChange:e=>setTotalDuration(e.target.value),style:{marginLeft:'10px'}})]})]}),uploadedFiles.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Uploaded Images\"}),uploadedFiles.map((image,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"img\",{src:image.base64,alt:image.file.name,style:{width:'60px',height:'60px'}}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:divideTime?calculateDividedDuration():image.duration,onChange:e=>handleDurationChange(index,e.target.value),disabled:divideTime,style:{marginLeft:'10px'}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveImage(index),style:{marginLeft:'10px'},children:\"Remove\"})]},index))]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Image Gallery\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsModalOpen(true),children:\"Manage Images\"}),isModalOpen&&/*#__PURE__*/_jsx(ImageModal,{images:fetchedImages,onClose:()=>setIsModalOpen(false),onDelete:handleDeleteImage// Pass the delete handler\n}),message&&/*#__PURE__*/_jsx(\"p\",{children:message})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,disabled:isSubmitDisabled()||loading,style:{marginTop:'20px',padding:'10px 20px',backgroundColor:isSubmitDisabled()?'grey':'blue',color:'white'},children:loading?'Uploading...':'Submit'}),message&&/*#__PURE__*/_jsx(\"p\",{style:{marginTop:'20px',color:'red'},children:message}),isModalOpen&&/*#__PURE__*/_jsx(ImageModal,{images:fetchedImages// Pass fetched images to the modal\n,onClose:()=>setIsModalOpen(false),onDelete:handleDeleteImage// Corrected line\n})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","ImageUpload","Resizer","ImageModal","jsx","_jsx","jsxs","_jsxs","App","uploadedFiles","setUploadedFiles","divideTime","setDivideTime","totalDuration","setTotalDuration","loading","setLoading","message","setMessage","startDate","setStartDate","endDate","setEndDate","startTime","setStartTime","endTime","setEndTime","isModalOpen","setIsModalOpen","fetchedImages","setFetchedImages","fetchImages","response","fetch","result","json","console","log","success","Array","isArray","data","error","handleDeleteImage","index","imageToDelete","id","method","headers","ok","updatedFiles","splice","imageName","errorData","resizeImage","file","Promise","resolve","imageFileResizer","uri","handleUpload","files","resizedImages","all","from","map","base64","duration","handleRemoveImage","handleDurationChange","value","calculateDividedDuration","length","Math","floor","isSubmitDisabled","some","image","handleSubmit","payload","name","imageUrl","Number","userId","isDBUpdated","body","JSON","stringify","err","handleFetchImages","style","padding","fontFamily","children","marginBottom","type","onChange","e","target","marginLeft","onUpload","marginTop","checked","display","alignItems","src","alt","width","height","disabled","onClick","images","onClose","onDelete","backgroundColor","color"],"sources":["/Users/macbook/Desktop/ad-display-portal/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'; \nimport ImageUpload from './components/ImageUpload';\nimport Resizer from 'react-image-file-resizer';\nimport ImageModal from './components/ImageModal';\n\nfunction App() {\n  // State variables\n  const [uploadedFiles, setUploadedFiles] = useState([]);\n  const [divideTime, setDivideTime] = useState(false);\n  const [totalDuration, setTotalDuration] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState('');\n  const [startDate, setStartDate] = useState('2024-11-25');\n  const [endDate, setEndDate] = useState('2024-11-25');\n  const [startTime, setStartTime] = useState('10:00');\n  const [endTime, setEndTime] = useState('22:00');\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [fetchedImages, setFetchedImages] = useState([]); // State for fetched images\n\n  // Fetch images from the backend on component mount\n  useEffect(() => {\n    const fetchImages = async () => {\n        try {\n            const response = await fetch('https://ad-display-backend.onrender.com/api/images');\n            const result = await response.json();\n            console.log('Fetched images:', result); // Log the fetched images\n\n            // Check if the fetch was successful and if data is an array\n            if (result.success && Array.isArray(result.data)) {\n                setFetchedImages(result.data); // Update state with fetched images\n            } else {\n                console.error('Fetched data is not an array:', result.data);\n                setFetchedImages([]); // Set to empty array if not valid\n            }\n        } catch (error) {\n            console.error('Error fetching images:', error);\n            setMessage('An error occurred while fetching images.');\n        }\n    };\n    fetchImages();\n  }, []); // Empty dependency array to fetch images only once on mount\n\n  // Handle image deletion from the gallery\n  const handleDeleteImage = async (index) => {\n      const imageToDelete = fetchedImages[index];\n\n      try {\n          const response = await fetch(`https://ad-display-backend.onrender.com/api/images/${imageToDelete.id}`, {\n              method: 'DELETE',\n              headers: {\n                  'Content-Type': 'application/json',\n              },\n          });\n\n          if (response.ok) {\n              // If the delete was successful, update the state\n              const updatedFiles = [...fetchedImages];\n              updatedFiles.splice(index, 1);\n              setFetchedImages(updatedFiles);\n              setMessage(`Image ${imageToDelete.imageName} deleted successfully!`);\n          } else {\n              const errorData = await response.json();\n              setMessage(errorData.error || `Failed to delete ${imageToDelete.imageName}.`);\n          }\n      } catch (error) {\n          console.error('Error deleting image:', error);\n          setMessage('An error occurred while deleting the image.');\n      }\n  };\n\n  // Resize the uploaded image before uploading\n  const resizeImage = (file) =>\n    new Promise((resolve) => {\n      Resizer.imageFileResizer(\n        file,\n        800, // Max width\n        800, // Max height\n        'JPEG', // Format\n        90, // Quality\n        0, // Rotation (0 for no rotation)\n        (uri) => resolve(uri), // Resolve with resized image\n        'base64' // Return as base64 string\n      );\n    });\n\n  // Handle image upload and resize images before setting them\n  const handleUpload = async (files) => {\n    const resizedImages = await Promise.all(\n      Array.from(files).map((file) => resizeImage(file)) // Resize each file\n    );\n    setUploadedFiles(\n      resizedImages.map((base64, index) => ({\n        file: files[index],\n        base64,\n        duration: 0,\n      }))\n    );\n  };\n\n  // Remove an uploaded image from the list\n  const handleRemoveImage = (index) => {\n    const updatedFiles = [...uploadedFiles];\n    updatedFiles.splice(index, 1); // Remove image by index\n    setUploadedFiles(updatedFiles);\n  };\n\n  // Handle duration change for a specific image\n  const handleDurationChange = (index, value) => {\n    const updatedFiles = [...uploadedFiles];\n    updatedFiles[index].duration = value; // Update the duration\n    setUploadedFiles(updatedFiles);\n  };\n\n  // Calculate the divided duration when the checkbox is checked\n  const calculateDividedDuration = () => {\n    if (uploadedFiles.length > 0 && totalDuration > 0) {\n      return Math.floor((totalDuration * 60) / uploadedFiles.length); // Divide duration equally\n    }\n    return 0;\n  };\n\n  // Check if the submit button should be disabled\n  const isSubmitDisabled = () => {\n    if (!startDate || !endDate || !startTime || !endTime) return true; // Disable if required fields are missing\n    if (divideTime || uploadedFiles.length === 0) return false; // Allow submit if dividing time or files are present\n    return uploadedFiles.some((image) => image.duration === 0); // Disable if any image has no duration set\n  };\n\n  // Handle form submission to upload images to the backend\n  const handleSubmit = async () => {\n    setLoading(true);\n    setMessage('');\n\n    for (const image of uploadedFiles) {\n      const payload = {\n        imageName: image.file.name,\n        imageUrl: image.base64,\n        startDate,\n        endDate,\n        startTime,\n        endTime,\n        duration: divideTime ? calculateDividedDuration() : Number(image.duration), // Use divided or custom duration\n        userId: 1,\n        isDBUpdated: 'y', // Mark as needing sync\n      };\n\n      try {\n        const response = await fetch('https://ad-display-backend.onrender.com/api/images', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(payload),\n        });\n\n        if (response.ok) {\n          const result = await response.json();\n          setMessage(`Image ${image.file.name} uploaded successfully!`);\n        } else {\n          const errorData = await response.json();\n          setMessage(errorData.error || `Failed to upload ${image.file.name}.`);\n        }\n      } catch (err) {\n        setMessage(`An error occurred while uploading ${image.file.name}.`);\n      }\n    }\n\n    setLoading(false);\n    setUploadedFiles([]); // Clear uploaded images\n  };\n\n  // Fetch images from the backend (used in multiple places)\n  const handleFetchImages = async () => {\n    try {\n      const response = await fetch('https://ad-display-backend.onrender.com/api/images');\n      const result = await response.json();\n      console.log('Fetched images:', result); // Log the fetched images\n  \n      // Check if the fetch was successful\n      if (result.success) {\n        setFetchedImages(result.data); // Update state with fetched images\n      } else {\n        setMessage(result.message || 'Failed to fetch images.');\n      }\n    } catch (error) {\n      console.error('Error fetching images:', error); // Log the error for debugging\n      setMessage('An error occurred while fetching images.');\n    }\n  };\n\n  return (\n    <div style={{ padding: '20px', fontFamily: 'Arial' }}>\n      <h1>Ad Display Portal v32</h1>\n\n      {/* Date and Time Input */}\n      <div style={{ marginBottom: '20px' }}>\n        <h3>Common Start/End Dates and Times</h3>\n        {/* Start Date */}\n        <div style={{ marginBottom: '10px' }}>\n          <label>\n            Start Date:\n            <input\n              type=\"date\"\n              value={startDate}\n              onChange={(e) => setStartDate(e.target.value)}\n              style={{ marginLeft: '10px' }}\n            />\n          </label>\n        </div>\n        {/* End Date */}\n        <div style={{ marginBottom: '10px' }}>\n          <label>\n            End Date:\n            <input\n              type=\"date\"\n              value={endDate}\n              onChange={(e) => setEndDate(e.target.value)}\n              style={{ marginLeft: '10px' }}\n            />\n          </label>\n        </div>\n        {/* Start Time */}\n        <div style={{ marginBottom: '10px' }}>\n          <label>\n            Start Time:\n            <input\n              type=\"time\"\n              value={startTime}\n              onChange={(e) => setStartTime(e.target.value)}\n              style={{ marginLeft: '10px' }}\n            />\n          </label>\n        </div>\n        {/* End Time */}\n        <div style={{ marginBottom: '10px' }}>\n          <label>\n            End Time:\n            <input\n              type=\"time\"\n              value={endTime}\n              onChange={(e) => setEndTime(e.target.value)}\n              style={{ marginLeft: '10px' }}\n            />\n          </label>\n        </div>\n      </div>\n\n      {/* Upload Section */}\n      <ImageUpload onUpload={handleUpload} />\n\n      {uploadedFiles.length > 0 && (\n        <div style={{ marginTop: '20px' }}>\n          <label>\n            <input\n              type=\"checkbox\"\n              checked={divideTime}\n              onChange={(e) => setDivideTime(e.target.checked)}\n            />\n            Divide time Duration equally\n          </label>\n\n          {divideTime && (\n            <div style={{ marginTop: '10px' }}>\n              <label>Total Duration (in minutes): </label>\n              <input\n                type=\"number\"\n                value={totalDuration}\n                onChange={(e) => setTotalDuration(e.target.value)}\n                style={{ marginLeft: '10px' }}\n              />\n            </div>\n          )}\n        </div>\n      )}\n\n      {uploadedFiles.length > 0 && (\n        <div style={{ marginTop: '20px' }}>\n          <h3>Uploaded Images</h3>\n          {uploadedFiles.map((image, index) => (\n            <div key={index} style={{ display: 'flex', alignItems: 'center', marginBottom: '10px' }}>\n              <img src={image.base64} alt={image.file.name} style={{ width: '60px', height: '60px' }} />\n              <input\n                type=\"number\"\n                value={divideTime ? calculateDividedDuration() : image.duration}\n                onChange={(e) => handleDurationChange(index, e.target.value)}\n                disabled={divideTime}\n                style={{ marginLeft: '10px' }}\n              />\n              <button onClick={() => handleRemoveImage(index)} style={{ marginLeft: '10px' }}>\n                Remove\n              </button>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Manage Button */}\n      <div>\n            <h1>Image Gallery</h1>\n            <button onClick={() => setIsModalOpen(true)}>Manage Images</button>\n            {isModalOpen && (\n                <ImageModal\n                    images={fetchedImages}\n                    onClose={() => setIsModalOpen(false)}\n                    onDelete={handleDeleteImage} // Pass the delete handler\n                />\n            )}\n            {message && <p>{message}</p>}\n        </div>\n\n      {/* Submit Button */} \n      <button\n        onClick={handleSubmit}\n        disabled={isSubmitDisabled() || loading}\n        style={{\n          marginTop: '20px',\n          padding: '10px 20px',\n          backgroundColor: isSubmitDisabled() ? 'grey' : 'blue',\n          color: 'white',\n        }}\n      >\n        {loading ? 'Uploading...' : 'Submit'}\n      </button>\n\n      {/* Message */}\n      {message && <p style={{ marginTop: '20px', color: 'red' }}>{message}</p>}\n\n      {/* Modal for Managing Images */}\n      {isModalOpen && (\n        <ImageModal\n          images={fetchedImages} // Pass fetched images to the modal\n          onClose={() => setIsModalOpen(false)}\n          onDelete={handleDeleteImage} // Corrected line\n        />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}